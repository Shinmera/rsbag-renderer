<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8"/>
    <title>Renderer</title>
    <link rel="stylesheet" type="text/css" href="main.css" />
    <link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css">
  </head>
  <body>
    <header>
      <h1>Renderer</h1>
    </header>
    <main class="renderer">
      <section class="player bag" data-frames="10000" data-resolution="200">
        <nav class="controls">
          <a class="play" href="#"><i class="icon-play icon-fixed-width"></i></a>
          <div class="seeker">
            <div class="loaded"></div>
            <div class="current"></div>
          </div>
          <span class="frameinfo">00:00:000</span>
        </nav>
        <section class="visualizations">
        </section>
      </section>
    </main>
    <footer>
      Footertext
    </footer>
    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.min.js"></script>
    <script type="text/javascript" src="OrbitControls.js"></script>
    <script type="text/javascript" src="Renderer.js"></script>
    <script type="text/javascript">
      var renderer = null;

      $(function(){
          function urlParameter(name) {
              return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(location.search)||[,""])[1].replace(/\+/g, '%20'))||null
          }
          
          renderer = new Renderer($(".player").first());

          // Primitive loading for now.
          renderer.log("Loading visualizer...");
          var visualizer = urlParameter("visualizer");
          jQuery.ajax({url:visualizer+".js", dataType: "text"}).success(function(data){
              renderer.loadVisualizer(data,'<canvas></canvas>','');
          }).fail(function(xhr, status){
              renderer.log(status);
          });
          
          // Load proper frame data
          renderer.log("Loading testdata...");
          jQuery.getJSON("testdata.json", function(data){
              renderer.addFrameData(data);
              renderer.log("Done loading.");
          });
      })
    </script>
  </body>
</html>
